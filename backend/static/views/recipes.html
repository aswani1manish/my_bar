<div class="row">
    <div class="col-12">
        <h2><i class="fas fa-glass-martini-alt"></i> Recipes Management</h2>
        <hr>
    </div>
</div>

<!-- Search and Filter -->
<div class="row mb-4">
    <div class="col-md-6 mb-2">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Search recipes..." 
                   ng-model="searchQuery" ng-change="search()">
            <button class="btn btn-outline-secondary" type="button" ng-click="search()">
                <i class="fas fa-search"></i>
            </button>
        </div>
    </div>
    <div class="col-md-6 mb-2">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Filter by tags (comma-separated)..." 
                   ng-model="tagSearch" ng-change="search()">
            <button class="btn btn-outline-secondary" type="button" ng-click="search()">
                <i class="fas fa-filter"></i>
            </button>
        </div>
    </div>
</div>

<!-- Add/Edit Form - COMMENTED OUT -->
<!-- <div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5>{{ isEditing ? 'Edit' : 'Add New' }} Recipe</h5>
            </div>
            <div class="card-body">
                <form ng-submit="saveRecipe()">
                    <div class="row">
                        <div class="col-md-12 mb-3">
                            <label class="form-label">Name *</label>
                            <input type="text" class="form-control" ng-model="currentRecipe.name" required>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" ng-model="currentRecipe.description" rows="2"></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Ingredients</label>
                        <div class="card mb-2">
                            <div class="card-body">
                                <div class="row g-2">
                                    <div class="col-md-5">
                                        <select class="form-select" ng-model="newIngredient.ingredient_id">
                                            <option value="">Select ingredient...</option>
                                            <option ng-repeat="ing in ingredients" value="{{ ing._id }}">{{ ing.name }}</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="number" step="0.25" class="form-control" 
                                               ng-model="newIngredient.quantity" placeholder="Quantity">
                                    </div>
                                    <div class="col-md-3">
                                        <input type="text" class="form-control" 
                                               ng-model="newIngredient.unit" placeholder="Unit (oz, dash, ml)">
                                    </div>
                                    <div class="col-md-1">
                                        <button type="button" class="btn btn-success w-100" ng-click="addIngredientToRecipe()">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="list-group">
                            <div class="list-group-item" ng-repeat="ing in currentRecipe.ingredients">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span>
                                        <strong>{{ getIngredientName(ing.ingredient_id) }}</strong> - 
                                        {{ ing.quantity }} {{ ing.unit }}
                                    </span>
                                    <button type="button" class="btn btn-sm btn-danger" ng-click="removeIngredientFromRecipe($index)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="list-group-item text-muted" ng-if="!currentRecipe.ingredients || currentRecipe.ingredients.length === 0">
                                No ingredients added yet
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Instructions</label>
                        <textarea class="form-control" ng-model="currentRecipe.instructions" rows="4" 
                                  placeholder="Describe how to make this cocktail..."></textarea>
                    </div>
                    
                    <image-upload images="currentRecipe.images" 
                                  removed-images="currentRecipe.removed_images"
                                  api-url="{{apiUrl}}">
                    </image-upload>
                    
                    <div class="mb-3">
                        <label class="form-label">Tags</label>
                        <div class="input-group mb-2">
                            <input type="text" class="form-control" ng-model="newTag" placeholder="Add a tag...">
                            <button class="btn btn-outline-secondary" type="button" ng-click="addTag()">
                                <i class="fas fa-plus"></i> Add
                            </button>
                        </div>
                        <div>
                            <span class="badge bg-secondary me-2 mb-2" ng-repeat="tag in currentRecipe.tags">
                                {{ tag }}
                                <i class="fas fa-times ms-1" ng-click="removeTag(tag)" style="cursor: pointer;"></i>
                            </span>
                        </div>
                    </div>
                    
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i> {{ isEditing ? 'Update' : 'Create' }}
                        </button>
                        <button type="button" class="btn btn-secondary" ng-click="resetForm()">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div> -->

<!-- Recipes List -->
<div class="row">
    <div class="col-12">
        <h4>All Recipes ({{ recipes.length }})</h4>
        <div class="row">
            <div class="col-md-6 col-lg-4 mb-3" ng-repeat="recipe in recipes">
                <div class="card h-100">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0">{{ recipe.name }}</h5>
                    </div>
                    <div class="card-body">
                        <!-- Recipe Images -->
                        <div class="item-image-gallery mb-2" ng-if="recipe.images && recipe.images.length > 0">
                            <img ng-repeat="img in recipe.images" ng-src="{{getImageUrl(img)}}" alt="{{recipe.name}}" style="width: 80px; height: 80px;">
                        </div>
                        
                        <p class="card-text">{{ recipe.description || 'No description' }}</p>
                        
                        <h6>Ingredients:</h6>
                        <ul class="small">
                            <li ng-repeat="ing in recipe.ingredients">
                                {{ ing.id }} | {{ ing.name) }} | {{ ing.amount }} | {{ ing.units }}
                            </li>
                        </ul>
                        
                        <div ng-if="recipe.instructions">
                            <h6>Instructions:</h6>
                            <p class="small">{{ recipe.instructions }}</p>
                        </div>
                        
                        <div ng-if="recipe.tags && recipe.tags.length > 0">
                            <span class="badge bg-info me-1" ng-repeat="tag in recipe.tags">{{ tag }}</span>
                        </div>
                    </div>
                    <!-- Edit/Delete Actions - COMMENTED OUT -->
                    <!-- <div class="card-footer">
                        <button class="btn btn-sm btn-warning me-1" ng-click="editRecipe(recipe)">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-sm btn-danger" ng-click="deleteRecipe(recipe._id)">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div> -->
                    <div class="card-footer">
                        <span class="text-muted">Read-only</span>
                    </div>
                </div>
            </div>
            <div class="col-12" ng-if="recipes.length === 0">
                <div class="alert alert-info">No recipes found. Create one to get started!</div>
            </div>
        </div>
    </div>
</div>
